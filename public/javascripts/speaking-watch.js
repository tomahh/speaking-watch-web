// Generated by CoffeeScript 1.7.1
(function() {
  var SpeakingWatch, update;

  window.SpeakingWatch = SpeakingWatch = (function() {
    function SpeakingWatch() {}

    SpeakingWatch.prototype.roundMinutes = function(minutes) {
      var digit;
      digit = ~~(minutes / 5);
      if (minutes > 30) {
        digit = 12 - digit;
      }
      return digit;
    };

    SpeakingWatch.prototype.hour = function(date) {
      var digit, hours;
      if (date == null) {
        date = new Date();
      }
      hours = ["TWELVE", "ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN", "EIGHT", "NINE", "TEN", "ELEVEN"];
      digit = date.getHours();
      if (date.getMinutes() >= 35) {
        digit += 1;
      }
      return hours[digit % 12];
    };

    SpeakingWatch.prototype.minutes = function(date) {
      var digit, minutes;
      if (date == null) {
        date = new Date();
      }
      minutes = ["", "FIVE", "TEN", "QUARTER", "TWENTY", "TWENTY FIVE", "HALF"];
      digit = this.roundMinutes(date.getMinutes());
      return minutes[digit];
    };

    SpeakingWatch.prototype.dial_half = function(date) {
      var minutes;
      if (date == null) {
        date = new Date();
      }
      minutes = this.roundMinutes(date.getMinutes());
      if (date.getMinutes() < 35) {
        return "PAST";
      } else {
        return "TO";
      }
    };

    SpeakingWatch.prototype.oclock = function(date) {
      if (date == null) {
        date = new Date();
      }
      if (this.roundMinutes(date.getMinutes()) === 0) {
        return "OCLOCK";
      } else {
        return "";
      }
    };

    SpeakingWatch.prototype.spoken = function(date) {
      var ret_string;
      if (date == null) {
        date = new Date();
      }
      ret_string = !this.oclock(date) ? "" + (this.minutes(date)) + " " + (this.dial_half(date)) + " " : "";
      ret_string += "" + (this.hour(date));
      if (this.oclock(date)) {
        ret_string += " " + (this.oclock(date));
      }
      return ret_string;
    };

    return SpeakingWatch;

  })();

  window.highlightWords = function(characters, words) {
    var highlighted_word, highlighted_word_index, tmp, word, _i, _len, _ref;
    tmp = "";
    _ref = words.split(" ");
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      word = _ref[_i];
      highlighted_word = "<span class=\"highlight\">" + word + "</span>";
      characters = characters.replace(word, highlighted_word);
      highlighted_word_index = characters.indexOf(highlighted_word);
      tmp += characters.slice(0, highlighted_word_index + highlighted_word.length);
      characters = characters.slice(highlighted_word_index + highlighted_word.length);
    }
    return tmp += characters;
  };

  update = function() {
    var content, time;
    content = "ITLISASTIME<br />" + "ACQUARTERDC<br />" + "TWENTYFIVEX<br />" + "HALFBTENFTO<br />" + "PASTERUNINE<br />" + "ONESIXTHREE<br />" + "FOURFIVETWO<br />" + "EIGHTELEVEN<br />" + "SEVENTWELVE<br />" + "TENSEOCLOCK<br />";
    time = "IT IS " + (new SpeakingWatch().spoken(new Date));
    content = highlightWords(content, time);
    $("#watch").html(content);
    return window.setTimeout(update, 10000);
  };

  $(function() {
    return update();
  });

}).call(this);
